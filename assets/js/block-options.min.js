!function(e,t,o,i){var s=wp.element.createHigherOrderComponent(function(e){return wp.components.withAPIData(function(){return{acf:"/block-options/v1/acf"}})(function(t){var i=wp.element.createElement,s=(wp.i18n.__,wp.editor.BlockControls,wp.editor.InspectorControls),l=(wp.components.Button,wp.components.TextControl,wp.components.SelectControl),n=wp.components.CheckboxControl,a=wp.components.TextareaControl,c=(wp.components.PanelRow,wp.components.PanelBody),b=wp.components.Dashicon,p=(wp.components.Popover,Object.assign({},t));p.key="blockOptions";var d=i(e,p),r=(t.isSelected,t.attributes,t.attributes.blockOpts?t.attributes.blockOpts:[]),u=t.attributes.className?t.attributes.className:"",v=!1,k=!1,_="",h="";if(UserLoginState="",ACF="",hr=i("div",{className:"blockopts-separator"},""),-1===u.indexOf(t.id)&&(void 0!==r.id&&r.id!=t.id&&(u=u.replace(" b"+r.id+" ","")),delete r.id,t.setAttributes({className:u+" b"+t.id+" "}),blockOptions=Object.assign({id:t.id},r),t.setAttributes({blockOpts:blockOptions})),void 0!==varblockOpts.settings&&void 0!==varblockOpts.settings.general&&(void 0!==varblockOpts.settings.general.opened&&"1"==varblockOpts.settings.general.opened&&(v=!0),void 0!==varblockOpts.settings.general.hidedesc&&"1"==varblockOpts.settings.general.hidedesc&&(k=!0)),void 0!==varblockOpts.devices&&"activate"==varblockOpts.devices&&(h=[i("h3",{},o.__("Device Visibility"))],k||h.push(i("p",{},o.__("Show or hide specific blocks on your selected devices."))),h.push(i(l,{label:o.__("Show/Hide"),value:void 0!==r.devices&&""!=r.devices?r.devices:"",options:[{label:o.__("Select Visibility Option"),value:"none"},{label:o.__("Hide on Checked Devices"),value:"hide"},{label:o.__("Show on Checked Devices"),value:"show"}],onChange:function(e){delete r.devices,blockOptions=Object.assign({devices:e},r),cname=u.replace(" blockopts-show",""),cname=cname.replace(" blockopts-hide",""),"none"!=e&&(cname=cname+" blockopts-"+e),t.setAttributes({blockOpts:blockOptions}),t.setAttributes({className:cname})}}),i(n,{label:o.__("Desktop"),checked:void 0!==r.desktop&&"on"==r.desktop,onChange:function(e){delete r.desktop,cname=u.replace(" blockopts-desktop",""),event.target.checked?(blockOptions=Object.assign({desktop:"on"},r),cname+=" blockopts-desktop"):blockOptions=r,t.setAttributes({blockOpts:blockOptions}),t.setAttributes({className:cname})}}),i(n,{label:o.__("Tablet"),checked:void 0!==r.tablet&&"on"==r.tablet,onChange:function(e){delete r.tablet,cname=u.replace(" blockopts-tablet",""),event.target.checked?(blockOptions=Object.assign({tablet:"on"},r),cname+=" blockopts-tablet"):blockOptions=r,t.setAttributes({blockOpts:blockOptions}),t.setAttributes({className:cname})}}),i(n,{label:o.__("Mobile"),checked:void 0!==r.mobile&&"on"==r.mobile,onChange:function(e){delete r.mobile,cname=u.replace(" blockopts-mobile",""),event.target.checked?(blockOptions=Object.assign({mobile:"on"},r),cname+=" blockopts-mobile"):blockOptions=r,t.setAttributes({blockOpts:blockOptions}),t.setAttributes({className:cname})}}),hr)),void 0!==varblockOpts.state&&"activate"==varblockOpts.state&&(UserLoginState=[i("h3",{},o.__("User Login State"))],k||UserLoginState.push(i("p",{},o.__("Restrict blocks visibility for logged-in and logged-out users. A simpler solution rather than using Display Logic feature."))),UserLoginState.push(i(l,{label:o.__("Select Login State"),value:void 0!==r.state&&""!=r.state?r.state:"",options:[{label:o.__("Select Visibility Option"),value:"none"},{label:o.__("Show only for Logged-in Users"),value:"in"},{label:o.__("Show only for Logged-out Users"),value:"out"}],onChange:function(e){delete r.state,blockOptions=Object.assign({state:e},r),t.setAttributes({blockOpts:blockOptions})}}),hr)),void 0!==varblockOpts.acf&&"activate"==varblockOpts.acf){var g=[{label:o.__("Select Field"),value:""}];if(ACF=[i("h3",{},o.__("Advanced Custom Fields"))],void 0!==t.acf.data){var O=t.acf.data;for(var m in O)g.push({label:O[m],value:m})}k||ACF.push(i("p",{},o.__("Restrict block visibility based on ACF field and conditions."))),ACF.push(i(l,{label:o.__("Select Visibility"),value:void 0!==r.acf_visibility&&""!=r.acf_visibility?r.acf_visibility:"",options:[{label:o.__("Select Visibility Option"),value:"none"},{label:o.__("Hide when Condition's met"),value:"hide"},{label:o.__("Show when Condition's met"),value:"show"}],onChange:function(e){delete r.acf_visibility,blockOptions=Object.assign({acf_visibility:e},r),t.setAttributes({blockOpts:blockOptions})}})),g.length>0&&ACF.push(i(l,{label:o.__("Select ACF Field"),value:void 0!==r.acf_field&&""!=r.acf_field?r.acf_field:"",options:g,onChange:function(e){delete r.acf_field,blockOptions=Object.assign({acf_field:e},r),t.setAttributes({blockOpts:blockOptions})}})),ACF.push(i(l,{label:o.__("Select Visibility"),value:void 0!==r.acf_condition&&""!=r.acf_condition?r.acf_condition:"",options:[{label:o.__("Select Condition"),value:"none"},{label:o.__("Is Equal to"),value:"equal"},{label:o.__("Is Not Equal to"),value:"not_equal"},{label:o.__("Contains"),value:"contains"},{label:o.__("Does Not Contain"),value:"not_contains"},{label:o.__("Is Empty"),value:"empty"},{label:o.__("Is Not Empty"),value:"not_empty"}],onChange:function(e){delete r.acf_condition,blockOptions=Object.assign({acf_condition:e},r),t.setAttributes({blockOpts:blockOptions})}})),ACF.push(i(a,{label:o.__("Conditional Value"),rows:3,value:r.acf_value,onChange:function(e){delete r.acf_value,blockOptions=Object.assign({acf_value:e},r),t.setAttributes({blockOpts:blockOptions})}}),hr)}return void 0!==varblockOpts.logic&&"activate"==varblockOpts.logic&&(_=[i("h3",{},o.__("Display Logic"))],k||_.push(i("p",{},o.__("Manage block visibility using valid PHP conditional tags. Please note that the display logic you introduce is EVAL'd directly. There is an optional filter 'block_options_logic_override' which you can use to bypass the EVAL with your own code if needed."))),_.push(i(a,{rows:3,value:r.logic,onChange:function(e){delete r.logic,blockOptions=Object.assign({logic:e},r),t.setAttributes({blockOpts:blockOptions})}}),hr)),d=[d,i(s,{key:"inspector"},i(c,{title:"Block Options",initialOpen:v},i("div",{className:"components-block-description"},i("div",{className:"editor-block-inspector__card-description"},i("span",{className:"widgetopts-dropcap"},i(b,{icon:"editor-bold"})),i("span",{},o.__("Manage your blocks better using available options below. You can restrict visibilities and add custom display logic using WordPress conditional tags.")))),hr,h,UserLoginState,ACF,_))]})},"withInspectorControls");wp.hooks.addFilter("blocks.registerBlockType","blockopts-attribute",function(e){return void 0!==e.attributes&&(e.attributes=Object.assign(e.attributes,{blockOpts:{type:"object"}})),e}),wp.hooks.addFilter("editor.BlockEdit","block-options/with-inspector-controls",s)}(window.wp.hooks,window.wp.blocks,window.wp.i18n,window.wp.element);